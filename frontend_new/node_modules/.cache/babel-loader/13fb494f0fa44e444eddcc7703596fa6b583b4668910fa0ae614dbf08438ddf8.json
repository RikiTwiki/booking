{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      isAdmin: false // Роль администратора\n    };\n  },\n  computed: {\n    // Проверяем, авторизован ли пользователь\n    isAuthenticated() {\n      return !!localStorage.getItem(\"authToken\");\n    }\n  },\n  async created() {\n    const token = localStorage.getItem(\"authToken\");\n    if (token) {\n      try {\n        // Вызываем новый API для проверки роли администратора\n        const response = await axios.get(\"/auth\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.isAdmin = response.data.isAdmin; // Устанавливаем статус администратора\n      } catch (error) {\n        console.error(\"Error checking admin status:\", error.message);\n      }\n    }\n  },\n  methods: {\n    goTo(route) {\n      this.$router.push(route);\n    },\n    logout() {\n      // Удаляем токен из localStorage\n      localStorage.removeItem(\"authToken\");\n      this.isAdmin = false;\n      this.$router.push(\"/login\");\n    }\n  }\n};","map":{"version":3,"names":["axios","data","isAdmin","computed","isAuthenticated","localStorage","getItem","created","token","response","get","headers","Authorization","error","console","message","methods","goTo","route","$router","push","logout","removeItem"],"sources":["/home/rikitwiki/Desktop/booking-app/frontend/src/components/NavBar.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar\">\n      <button @click=\"goTo('/')\" :disabled=\"$route.path === '/'\">Home</button>\n      <button v-if=\"!isAuthenticated\" @click=\"goTo('/login')\" :disabled=\"$route.path === '/login'\">Login</button>\n      <button v-if=\"!isAuthenticated\" @click=\"goTo('/register')\" :disabled=\"$route.path === '/register'\">Register</button>\n      <button v-if=\"isAuthenticated\" @click=\"logout\">Exit</button>\n      <button v-if=\"isAuthenticated\" @click=\"goTo('/add-room')\" :disabled=\"$route.path === '/add-room'\">Add Room</button>\n      <button v-if=\"isAuthenticated\" @click=\"goTo('/add-booking')\" :disabled=\"$route.path === '/add-booking'\">Add Booking</button>\n      <button v-if=\"isAdmin\" @click=\"goTo('/users')\" :disabled=\"$route.path === '/users'\">Users</button>\n    </nav>\n  </template>\n  \n  <script>\n  import axios from \"axios\";\n  \n  export default {\n    data() {\n      return {\n        isAdmin: false, // Роль администратора\n      };\n    },\n    computed: {\n      // Проверяем, авторизован ли пользователь\n      isAuthenticated() {\n        return !!localStorage.getItem(\"authToken\");\n      },\n    },\n    async created() {\n        const token = localStorage.getItem(\"authToken\");\n        if (token) {\n        try {\n            // Вызываем новый API для проверки роли администратора\n            const response = await axios.get(\"/auth\", {\n            headers: { Authorization: `Bearer ${token}` },\n            });\n            this.isAdmin = response.data.isAdmin; // Устанавливаем статус администратора\n        } catch (error) {\n            console.error(\"Error checking admin status:\", error.message);\n        }\n      }\n    },\n    methods: {\n      goTo(route) {\n        this.$router.push(route);\n      },\n      logout() {\n        // Удаляем токен из localStorage\n        localStorage.removeItem(\"authToken\");\n        this.isAdmin = false;\n        this.$router.push(\"/login\");\n      },\n    },\n  };\n  </script>\n  \n  <style scoped>\n  .navbar {\n    display: flex;\n    justify-content: center;\n    gap: 15px;\n    padding: 10px 20px;\n    background-color: #2c3e50;\n    border-radius: 10px;\n    margin-bottom: 20px;\n  }\n  \n  button {\n    padding: 10px 20px;\n    font-size: 16px;\n    font-weight: bold;\n    background-color: #3498db;\n    color: white;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    transition: background-color 0.3s ease, transform 0.2s ease;\n  }\n  \n  button:hover {\n    background-color: #2980b9;\n    transform: scale(1.05);\n  }\n  \n  button:disabled {\n    background-color: #95a5a6;\n    cursor: not-allowed;\n  }\n  \n  .navbar button {\n    text-transform: uppercase;\n  }\n  </style>  "],"mappings":";AAaE,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,KAAK,CAAE;IAClB,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACR;IACAC,eAAeA,CAAA,EAAG;MAChB,OAAO,CAAC,CAACC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IAC5C;EACF,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACZ,MAAMC,KAAI,GAAIH,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IAC/C,IAAIE,KAAK,EAAE;MACX,IAAI;QACA;QACA,MAAMC,QAAO,GAAI,MAAMT,KAAK,CAACU,GAAG,CAAC,OAAO,EAAE;UAC1CC,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUJ,KAAK;UAAG;QAC5C,CAAC,CAAC;QACF,IAAI,CAACN,OAAM,GAAIO,QAAQ,CAACR,IAAI,CAACC,OAAO,EAAE;MAC1C,EAAE,OAAOW,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAACE,OAAO,CAAC;MAChE;IACF;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,IAAIA,CAACC,KAAK,EAAE;MACV,IAAI,CAACC,OAAO,CAACC,IAAI,CAACF,KAAK,CAAC;IAC1B,CAAC;IACDG,MAAMA,CAAA,EAAG;MACP;MACAhB,YAAY,CAACiB,UAAU,CAAC,WAAW,CAAC;MACpC,IAAI,CAACpB,OAAM,GAAI,KAAK;MACpB,IAAI,CAACiB,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;IAC7B;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}