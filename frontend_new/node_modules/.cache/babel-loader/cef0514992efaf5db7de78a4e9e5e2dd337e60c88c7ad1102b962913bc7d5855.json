{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = [\"onClick\"];\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = {\n  key: 0,\n  class: \"modal\"\n};\nconst _hoisted_4 = [\"required\"];\nconst _hoisted_5 = {\n  type: \"submit\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[8] || (_cache[8] = _createElementVNode(\"h1\", null, \"Manage Users\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.openCreateModal && $options.openCreateModal(...args))\n  }, \"Create User\"), _createElementVNode(\"table\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"ID\"), _createElementVNode(\"th\", null, \"Email\"), _createElementVNode(\"th\", null, \"Role\"), _createElementVNode(\"th\", null, \"Actions\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.users, user => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: user.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(user.id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(user.email), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(user.role), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.openEditModal(user)\n    }, \"Edit\", 8 /* PROPS */, _hoisted_1), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteUser(user.id)\n    }, \"Delete\", 8 /* PROPS */, _hoisted_2)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" Модальное окно создания и редактирования \"), $data.showModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"h2\", null, _toDisplayString($data.isEditing ? 'Edit User' : 'Create User'), 1 /* TEXT */), _createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers($event => $data.isEditing ? $options.updateUser() : $options.createUser(), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.formData.email = $event),\n    placeholder: \"Email\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.formData.email]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.formData.password = $event),\n    placeholder: \"Password\",\n    required: !$data.isEditing\n  }, null, 8 /* PROPS */, _hoisted_4), [[_vModelText, $data.formData.password]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.formData.role = $event),\n    required: \"\"\n  }, _cache[7] || (_cache[7] = [_createElementVNode(\"option\", {\n    value: \"admin\"\n  }, \"Admin\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"user\"\n  }, \"User\", -1 /* HOISTED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $data.formData.role]]), _createElementVNode(\"button\", _hoisted_5, _toDisplayString($data.isEditing ? 'Save Changes' : 'Create User'), 1 /* TEXT */)], 32 /* NEED_HYDRATION */), _createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.closeModal && $options.closeModal(...args))\n  }, \"Cancel\")])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["key","class","type","_createElementBlock","_createElementVNode","onClick","_cache","args","$options","openCreateModal","_Fragment","_renderList","$data","users","user","id","_toDisplayString","email","role","$event","openEditModal","_hoisted_1","deleteUser","_hoisted_2","_createCommentVNode","showModal","_hoisted_3","isEditing","onSubmit","_withModifiers","updateUser","createUser","formData","placeholder","required","password","_hoisted_4","value","_hoisted_5","closeModal"],"sources":["/home/rikitwiki/Desktop/booking-app/frontend/src/components/UsersPage.vue"],"sourcesContent":["<template>\n    <div>\n      <h1>Manage Users</h1>\n      <button @click=\"openCreateModal\">Create User</button>\n      <table>\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Email</th>\n            <th>Role</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"user in users\" :key=\"user.id\">\n            <td>{{ user.id }}</td>\n            <td>{{ user.email }}</td>\n            <td>{{ user.role }}</td>\n            <td>\n              <button @click=\"openEditModal(user)\">Edit</button>\n              <button @click=\"deleteUser(user.id)\">Delete</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n  \n      <!-- Модальное окно создания и редактирования -->\n      <div v-if=\"showModal\" class=\"modal\">\n        <h2>{{ isEditing ? 'Edit User' : 'Create User' }}</h2>\n        <form @submit.prevent=\"isEditing ? updateUser() : createUser()\">\n          <input v-model=\"formData.email\" placeholder=\"Email\" required />\n          <input v-model=\"formData.password\" placeholder=\"Password\" :required=\"!isEditing\" />\n          <select v-model=\"formData.role\" required>\n            <option value=\"admin\">Admin</option>\n            <option value=\"user\">User</option>\n          </select>\n          <button type=\"submit\">{{ isEditing ? 'Save Changes' : 'Create User' }}</button>\n        </form>\n        <button @click=\"closeModal\">Cancel</button>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default {\n    data() {\n      return {\n        users: [],\n        showModal: false,\n        isEditing: false,\n        formData: { id: null, email: '', password: '', role: 'user' },\n      };\n    },\n    async created() {\n      await this.fetchUsers();\n    },\n    methods: {\n        async fetchUsers() {\n            const token = localStorage.getItem('authToken');\n            const response = await axios.get('/api/users', {  // Исправлено на /api/users\n            headers: { Authorization: `Bearer ${token}` },\n            });\n            this.users = response.data;\n        },\n        openCreateModal() {\n            this.showModal = true;\n            this.isEditing = false;\n            this.formData = { id: null, email: '', password: '', role: 'user' };\n        },\n        openEditModal(user) {\n            this.showModal = true;\n            this.isEditing = true;\n            this.formData = { id: user.id, email: user.email, role: user.role };\n        },\n        async createUser() {\n            const token = localStorage.getItem('authToken');\n            await axios.post('/api/users', this.formData, {  // Исправлено на /api/users\n            headers: { Authorization: `Bearer ${token}` },\n            });\n            this.closeModal();\n            await this.fetchUsers();\n        },\n        async updateUser() {\n            const token = localStorage.getItem('authToken');\n            await axios.put(`/api/users/${this.formData.id}`, this.formData, {  // Исправлено на /api/users\n            headers: { Authorization: `Bearer ${token}` },\n            });\n            this.closeModal();\n            await this.fetchUsers();\n        },\n        async deleteUser(id) {\n            const token = localStorage.getItem('authToken');\n            await axios.delete(`/api/users/${id}`, {  // Исправлено на /api/users\n            headers: { Authorization: `Bearer ${token}` },\n            });\n            await this.fetchUsers();\n        },\n        closeModal() {\n            this.showModal = false;\n        },\n     }\n  };\n  </script>\n  \n  <style scoped>\n  /* Стили для таблицы и модальных окон */\n  </style>  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}