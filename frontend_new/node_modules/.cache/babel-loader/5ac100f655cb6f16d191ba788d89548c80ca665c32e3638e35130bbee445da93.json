{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"navbar\"\n};\nconst _hoisted_2 = [\"disabled\"];\nconst _hoisted_3 = [\"disabled\"];\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = [\"disabled\"];\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"nav\", _hoisted_1, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => $options.goTo('/')),\n    disabled: _ctx.$route.path === '/'\n  }, \"Home\", 8 /* PROPS */, _hoisted_2), !$options.isAuthenticated ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[1] || (_cache[1] = $event => $options.goTo('/login')),\n    disabled: _ctx.$route.path === '/login'\n  }, \"Login\", 8 /* PROPS */, _hoisted_3)) : _createCommentVNode(\"v-if\", true), !$options.isAuthenticated ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    onClick: _cache[2] || (_cache[2] = $event => $options.goTo('/register')),\n    disabled: _ctx.$route.path === '/register'\n  }, \"Register\", 8 /* PROPS */, _hoisted_4)) : _createCommentVNode(\"v-if\", true), $options.isAuthenticated ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 2,\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.logout && $options.logout(...args))\n  }, \"Exit\")) : _createCommentVNode(\"v-if\", true), $options.isAuthenticated ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 3,\n    onClick: _cache[4] || (_cache[4] = $event => $options.goTo('/add-room')),\n    disabled: _ctx.$route.path === '/add-room'\n  }, \"Add Room\", 8 /* PROPS */, _hoisted_5)) : _createCommentVNode(\"v-if\", true), $options.isAuthenticated ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 4,\n    onClick: _cache[5] || (_cache[5] = $event => $options.goTo('/add-booking')),\n    disabled: _ctx.$route.path === '/add-booking'\n  }, \"Add Booking\", 8 /* PROPS */, _hoisted_6)) : _createCommentVNode(\"v-if\", true), $data.isAdmin ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 5,\n    onClick: _cache[6] || (_cache[6] = $event => $options.goTo('/users')),\n    disabled: _ctx.$route.path === '/users'\n  }, \"Users\", 8 /* PROPS */, _hoisted_7)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","onClick","_cache","$event","$options","goTo","disabled","_ctx","$route","path","_hoisted_2","isAuthenticated","key","_hoisted_3","_createCommentVNode","_hoisted_4","args","logout","_hoisted_5","_hoisted_6","$data","isAdmin","_hoisted_7"],"sources":["/home/rikitwiki/Desktop/booking-app/frontend/src/components/NavBar.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar\">\n      <button @click=\"goTo('/')\" :disabled=\"$route.path === '/'\">Home</button>\n      <button v-if=\"!isAuthenticated\" @click=\"goTo('/login')\" :disabled=\"$route.path === '/login'\">Login</button>\n      <button v-if=\"!isAuthenticated\" @click=\"goTo('/register')\" :disabled=\"$route.path === '/register'\">Register</button>\n      <button v-if=\"isAuthenticated\" @click=\"logout\">Exit</button>\n      <button v-if=\"isAuthenticated\" @click=\"goTo('/add-room')\" :disabled=\"$route.path === '/add-room'\">Add Room</button>\n      <button v-if=\"isAuthenticated\" @click=\"goTo('/add-booking')\" :disabled=\"$route.path === '/add-booking'\">Add Booking</button>\n      <button v-if=\"isAdmin\" @click=\"goTo('/users')\" :disabled=\"$route.path === '/users'\">Users</button>\n    </nav>\n  </template>\n  \n  <script>\n  import axios from \"axios\";\n  \n  export default {\n    data() {\n      return {\n        isAdmin: false, // Роль администратора\n      };\n    },\n    computed: {\n      // Проверяем, авторизован ли пользователь\n      isAuthenticated() {\n        return !!localStorage.getItem(\"authToken\");\n      },\n    },\n    async created() {\n        const token = localStorage.getItem(\"authToken\");\n        if (token) {\n        try {\n            // Вызываем новый API для проверки роли администратора\n            const response = await axios.get(\"/auth/admin\", {\n            headers: { Authorization: `Bearer ${token}` },\n            });\n            this.isAdmin = response.data.isAdmin; // Устанавливаем статус администратора\n        } catch (error) {\n            console.error(\"Error checking admin status:\", error.message);\n        }\n      }\n    },\n    methods: {\n      goTo(route) {\n        this.$router.push(route);\n      },\n      logout() {\n        // Удаляем токен из localStorage\n        localStorage.removeItem(\"authToken\");\n        this.isAdmin = false;\n        this.$router.push(\"/login\");\n      },\n    },\n  };\n  </script>\n  \n  <style scoped>\n  .navbar {\n    display: flex;\n    justify-content: center;\n    gap: 15px;\n    padding: 10px 20px;\n    background-color: #2c3e50;\n    border-radius: 10px;\n    margin-bottom: 20px;\n  }\n  \n  button {\n    padding: 10px 20px;\n    font-size: 16px;\n    font-weight: bold;\n    background-color: #3498db;\n    color: white;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    transition: background-color 0.3s ease, transform 0.2s ease;\n  }\n  \n  button:hover {\n    background-color: #2980b9;\n    transform: scale(1.05);\n  }\n  \n  button:disabled {\n    background-color: #95a5a6;\n    cursor: not-allowed;\n  }\n  \n  .navbar button {\n    text-transform: uppercase;\n  }\n  </style>  "],"mappings":";;EACSA,KAAK,EAAC;AAAQ;mBADvB;mBAAA;mBAAA;mBAAA;mBAAA;mBAAA;;uBACIC,mBAAA,CAQM,OARNC,UAQM,GAPJC,mBAAA,CAAwE;IAA/DC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,IAAI;IAAQC,QAAQ,EAAEC,IAAA,CAAAC,MAAM,CAACC,IAAI;KAAU,MAAI,iBAFrEC,UAAA,G,CAGqBN,QAAA,CAAAO,eAAe,I,cAA9Bb,mBAAA,CAA2G;IAHjHc,GAAA;IAGuCX,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,IAAI;IAAaC,QAAQ,EAAEC,IAAA,CAAAC,MAAM,CAACC,IAAI;KAAe,OAAK,iBAHxGI,UAAA,KAAAC,mBAAA,gB,CAIqBV,QAAA,CAAAO,eAAe,I,cAA9Bb,mBAAA,CAAoH;IAJ1Hc,GAAA;IAIuCX,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,IAAI;IAAgBC,QAAQ,EAAEC,IAAA,CAAAC,MAAM,CAACC,IAAI;KAAkB,UAAQ,iBAJjHM,UAAA,KAAAD,mBAAA,gBAKoBV,QAAA,CAAAO,eAAe,I,cAA7Bb,mBAAA,CAA4D;IALlEc,GAAA;IAKsCX,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAc,IAAA,KAAEZ,QAAA,CAAAa,MAAA,IAAAb,QAAA,CAAAa,MAAA,IAAAD,IAAA,CAAM;KAAE,MAAI,KALzDF,mBAAA,gBAMoBV,QAAA,CAAAO,eAAe,I,cAA7Bb,mBAAA,CAAmH;IANzHc,GAAA;IAMsCX,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,IAAI;IAAgBC,QAAQ,EAAEC,IAAA,CAAAC,MAAM,CAACC,IAAI;KAAkB,UAAQ,iBANhHS,UAAA,KAAAJ,mBAAA,gBAOoBV,QAAA,CAAAO,eAAe,I,cAA7Bb,mBAAA,CAA4H;IAPlIc,GAAA;IAOsCX,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,IAAI;IAAmBC,QAAQ,EAAEC,IAAA,CAAAC,MAAM,CAACC,IAAI;KAAqB,aAAW,iBAPzHU,UAAA,KAAAL,mBAAA,gBAQoBM,KAAA,CAAAC,OAAO,I,cAArBvB,mBAAA,CAAkG;IARxGc,GAAA;IAQ8BX,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,IAAI;IAAaC,QAAQ,EAAEC,IAAA,CAAAC,MAAM,CAACC,IAAI;KAAe,OAAK,iBAR/Fa,UAAA,KAAAR,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}